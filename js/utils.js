import{updateScrollStyle,updateHomeBannerBlur}from"./utils/scroll.js";import{initFontSizeAdjust,initGoComment,initToolsListToggle,updateAutoHideTools}from"./utils/sideTools.js";import{initHomeBannerHeight,initPageHeightHandle,relativeTimeInHome}from"./utils/layout.js";let activeUtils=null;let didInitScroll=false;const debounce=(t,o)=>{let l;return(...e)=>{clearTimeout(l);l=setTimeout(()=>t(...e),o)}};const handleScroll=()=>{if(!activeUtils){return}activeUtils.updateScrollStyle();activeUtils.updateAutoHideTools()};const handleHomeBannerBlur=()=>{if(!activeUtils){return}activeUtils.updateHomeBannerBlur()};const registerScrollHandlers=e=>{if(didInitScroll||!e){return}didInitScroll=true;window.addEventListener("scroll",handleScroll,{signal:e});window.addEventListener("scroll",debounce(handleHomeBannerBlur,20),{signal:e})};export const initUtilsGlobals=({signal:e}={})=>{registerScrollHandlers(e)};export const initUtilsPage=({signal:e}={})=>{const t={html_root_dom:document.querySelector("html"),pageTop_dom:document.querySelector(".main-content-header"),homeBanner_dom:document.querySelector(".home-banner-container"),homeBannerBackground_dom:document.querySelector(".home-banner-background"),scrollProgressBar_dom:document.querySelector(".scroll-progress-bar"),backToTopButton_dom:document.querySelector(".tool-scroll-to-top"),toolsList:document.querySelector(".hidden-tools-list"),toggleButton:document.querySelector(".toggle-tools-list"),fontAdjPlus_dom:document.querySelector(".tool-font-adjust-plus"),fontAdMinus_dom:document.querySelector(".tool-font-adjust-minus"),innerHeight:window.innerHeight,prevScrollValue:0,triggerViewHeight:.5*window.innerHeight,isHasScrollProgressBar:theme.global.scroll_progress.bar===true,isHasScrollPercent:theme.global.scroll_progress.percentage===true};activeUtils={updateScrollStyle:()=>updateScrollStyle(t),updateAutoHideTools:updateAutoHideTools,updateHomeBannerBlur:()=>updateHomeBannerBlur(t)};updateAutoHideTools();initToolsListToggle(t,e);initFontSizeAdjust(t,e);initGoComment(e);initPageHeightHandle(t);initHomeBannerHeight(t);relativeTimeInHome()};