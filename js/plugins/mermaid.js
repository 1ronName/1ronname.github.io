import{styleStatus}from"../state/styleStatus.js";const mermaidSelector=".mermaid";const ensureOriginalCode=()=>{document.querySelectorAll(mermaidSelector).forEach(e=>{if(!e.getAttribute("data-original-code")){e.setAttribute("data-original-code",e.innerHTML)}})};const resetProcessed=()=>{document.querySelectorAll(mermaidSelector).forEach(e=>{const t=e.getAttribute("data-original-code");if(t!==null){e.removeAttribute("data-processed");e.innerHTML=t}})};const getMermaidTheme=()=>{const e=theme.plugins?.mermaid||{};const t=e.theme||{};const r=t.light||"default";const i=t.dark||"dark";return styleStatus.isDark?i:r};export default function initMermaid(){if(!theme.plugins?.mermaid?.enable||!window.mermaid){return}ensureOriginalCode();resetProcessed();const e=getMermaidTheme();mermaid.initialize({theme:e});mermaid.init({theme:e},document.querySelectorAll(mermaidSelector))}