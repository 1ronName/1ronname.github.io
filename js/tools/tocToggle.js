import{updateStyleStatus}from"../state/styleStatus.js";let didInit=false;const getTocElements=()=>({toggleBar:document.querySelector(".page-aside-toggle"),postPageContainerDom:document.querySelector(".post-page-container"),toggleBarIcon:document.querySelector(".page-aside-toggle i"),mainContentDom:document.querySelector(".main-content")});const toggleClassName=(e,t,o)=>{if(e){e.classList.toggle(t,o)}};const applyTocState=(e,t)=>{toggleClassName(e.toggleBarIcon,"fas",t);toggleClassName(e.toggleBarIcon,"fa-indent",t);toggleClassName(e.toggleBarIcon,"fa-outdent",!t);toggleClassName(e.postPageContainerDom,"show-toc",t);toggleClassName(e.mainContentDom,"has-toc",t)};const showToggle=e=>{if(e.toggleBar){e.toggleBar.style.display="flex"}};const hideToggle=e=>{if(e.toggleBar){e.toggleBar.style.display="none"}};const handleToggleClick=e=>{const t=e.target.closest(".page-aside-toggle");if(!t){return}const o=getTocElements();if(!o.postPageContainerDom||!o.mainContentDom){return}const a=!o.postPageContainerDom.classList.contains("show-toc");updateStyleStatus({isOpenPageAside:a});showToggle(o);applyTocState(o,a)};export function initTocToggle({signal:e}={}){if(!didInit&&e){didInit=true;document.addEventListener("click",handleToggleClick,{signal:e})}const t=getTocElements();return{pageAsideHandleOfTOC(e){if(!t.postPageContainerDom||!t.mainContentDom){hideToggle(t);return}showToggle(t);applyTocState(t,e)},hideToggle(){hideToggle(t)}}}