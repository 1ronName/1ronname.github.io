const readyCallbacks=[];const pageViewCallbacks=[];const visitStartCallbacks=[];const beforeReplaceCallbacks=[];let readyFired=false;let didInitSwupHooks=false;const runCallbacks=(e,a)=>{e.forEach(e=>{try{e(a)}catch(e){console.error("Lifecycle callback failed:",e)}})};const fireReady=()=>{if(readyFired){return}readyFired=true;runCallbacks(readyCallbacks);runCallbacks(pageViewCallbacks,{initial:true})};const initSwupHooks=e=>{if(didInitSwupHooks||!e||!e.hooks){return}didInitSwupHooks=true;e.hooks.on("page:view",e=>{runCallbacks(pageViewCallbacks,e)});e.hooks.on("visit:start",e=>{runCallbacks(visitStartCallbacks,e)});e.hooks.before("content:replace",e=>{runCallbacks(beforeReplaceCallbacks,e)})};const handleSwupReady=e=>{const a=window.swup||e?.detail?.swup;initSwupHooks(a)};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",fireReady,{once:true})}else{fireReady()}if(window.swup&&window.swup.hooks){initSwupHooks(window.swup)}else{window.addEventListener("redefine:swup:ready",handleSwupReady,{once:true})}export const onReady=e=>{if(typeof e!=="function"){return}if(readyFired){e();return}readyCallbacks.push(e)};export const onPageView=e=>{if(typeof e!=="function"){return}pageViewCallbacks.push(e);if(readyFired){e({initial:true})}};export const onVisitStart=e=>{if(typeof e!=="function"){return}visitStartCallbacks.push(e)};export const onBeforeContentReplace=e=>{if(typeof e!=="function"){return}beforeReplaceCallbacks.push(e)};